

CREATE VIEW attendance_by_session_type AS
SELECT 
    Reg_no,
    Course_code,
    CASE 
        WHEN theory = TRUE AND practical = FALSE THEN 'Theory'
        WHEN practical = TRUE AND theory = FALSE THEN 'Practical'
        WHEN theory = TRUE AND practical = TRUE THEN 'Both'
        ELSE 'Unknown'
    END AS session_Type,
    COUNT(*) AS total_sessions,
    SUM(CASE WHEN Status = 'Present' THEN 1 ELSE 0 END) AS attended_sessions,
    (SUM(CASE WHEN Status = 'Present' THEN 1 ELSE 0 END) * 100.0 / COUNT(*)) AS attendance_percentage,
    CASE 
        WHEN (SUM(CASE WHEN Status = 'Present' THEN 1 ELSE 0 END) * 100.0 / COUNT(*)) >= 80 THEN 'Eligible'
        ELSE 'Not Eligible'
    END AS eligibility
FROM 
    ATTENDANCE
GROUP BY 
    Reg_no, Course_code, session_Type;




To retrieve the output from the attendance_by_session_type view, you can simply use a SELECT statement. This view aggregates attendance data by Reg_no, Course_code, and session_Type, so querying it will display the calculated attendance statistics.


SELECT * FROM attendance_by_session_type;


Explanation of Output
This query will return the following columns:

Reg_no - The student's registration number.
Course_code - The code of the course attended.
session_Type - The type of session (e.g., Theory, Practical, or Both).
total_sessions - The total number of sessions held for that type.
attended_sessions - The total sessions the student attended.
attendance_percentage - The percentage of sessions attended.
eligibility - Whether the student is eligible based on attendance (Eligible/Not Eligible).
If youâ€™d like to filter the output further, for example, to see only eligible students or students with a specific registration number, you can add WHERE clauses like this:


-- To see only eligible students
SELECT * FROM attendance_by_session_type WHERE eligibility = 'Eligible';

-- To filter by a specific student's registration number
SELECT * FROM attendance_by_session_type WHERE Reg_no = 'TG/2022/001';

-- To see students with attendance percentage below 80%
SELECT * FROM attendance_by_session_type WHERE attendance_percentage < 80;

These queries will display the filtered output directly from the view based on the specified conditions.

